<view class="container">
  <view class="community-header card">
    <view class="welcome-message">
      <text class="welcome-title">æ¬¢è¿æ¥åˆ°å¥åº·ç¤¾åŒº</text>
      <text class="welcome-desc">åœ¨è¿™é‡Œåˆ†äº«ç»éªŒï¼Œäº’ç›¸æ”¯æŒ</text>
    </view>
    <button class="btn-primary" bindtap="createPost">å‘å¸ƒåŠ¨æ€</button>
  </view>

  <view class="community-tabs">
    <view class="tab {{currentTab === 'posts' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="posts">
      æœ€æ–°åŠ¨æ€
    </view>
    <view class="tab {{currentTab === 'stories' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="stories">
      åº·å¤æ•…äº‹
    </view>
    <view class="tab {{currentTab === 'qa' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="qa">
      ä¸“å®¶ç­”ç–‘
    </view>
  </view>

  <view class="posts-list" wx:if="{{currentTab === 'posts'}}">
    <view class="post-item card" wx:for="{{posts}}" wx:key="id">
      <view class="post-header">
        <image src="{{item.avatar}}" class="post-avatar"></image>
        <view class="post-user">
          <text class="username">{{item.username}}</text>
          <text class="post-time">{{item.time}}</text>
        </view>
      </view>
      <view class="post-content">
        <text>{{item.content}}</text>
      </view>
      <security-monitor content="{{item.content}}" />
      <view class="post-actions">
        <view class="action-item" bindtap="likePost" data-id="{{item.id}}">
          <text class="icon">â¤ï¸</text>
          <text>{{item.likes}}</text>
        </view>
        <view class="action-item" bindtap="commentPost" data-id="{{item.id}}">
          <text class="icon">ğŸ’¬</text>
          <text>{{item.comments}}</text>
        </view>
        <view class="action-item" bindtap="sharePost" data-id="{{item.id}}">
          <text class="icon">â†—ï¸</text>
          <text>åˆ†äº«</text>
        </view>
      </view>
    </view>
  </view>

  <view class="stories-list" wx:if="{{currentTab === 'stories'}}">
    <view class="story-item card" wx:for="{{recoveryStories}}" wx:key="id" bindtap="viewStory" data-id="{{item.id}}">
      <view class="story-header">
        <text class="story-title">{{item.title}}</text>
        <text class="story-author">by {{item.author}}</text>
      </view>
      <view class="story-excerpt">
        <text>{{item.excerpt}}</text>
      </view>
      <view class="story-stats">
        <text class="read-count">é˜…è¯»ï¼š{{item.readCount}}</text>
        <text class="like-count">ç‚¹èµï¼š{{item.likeCount}}</text>
      </view>
    </view>
  </view>

  <view class="qa-list" wx:if="{{currentTab === 'qa'}}">
    <view class="qa-item card" wx:for="{{expertQA}}" wx:key="id">
      <view class="question">
        <text class="q-label">é—®ï¼š</text>
        <text class="q-content">{{item.question}}</text>
      </view>
      <view class="answer">
        <text class="a-label">ç­”ï¼š</text>
        <text class="a-content">{{item.answer}}</text>
      </view>
      <view class="expert-info">
        <text>{{item.expert}} Â· {{item.department}}</text>
      </view>
    </view>
  </view>

  <view class="online-experts card">
    <view class="section-title">ğŸ‘¨â€âš•ï¸ åœ¨çº¿ä¸“å®¶</view>
    <view class="experts-list">
      <view class="expert-item" wx:for="{{onlineExperts}}" wx:key="id">
        <image src="{{item.avatar}}" class="expert-avatar"></image>
        <view class="expert-info">
          <text class="expert-name">{{item.name}}</text>
          <text class="expert-department">{{item.department}}</text>
        </view>
        <view class="expert-status {{item.online ? 'online' : 'offline'}}">
          {{item.online ? 'åœ¨çº¿' : 'ç¦»çº¿'}}
        </view>
      </view>
    </view>
  </view>
</view>