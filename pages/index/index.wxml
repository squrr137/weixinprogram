<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å’Œè§’è‰²åˆ‡æ¢ -->
  <view class="user-info card">
    <view class="flex-row">
      <view class="user-avatar">{{userRole === 'patient' ? 'ğŸ‘¤' : userRole === 'doctor' ? 'ğŸ‘¨â€âš•ï¸' : 'ğŸ‘ª'}}</view>
      <view class="user-details">
        <text class="username">æ¬¢è¿ï¼Œ{{welcomeText}}</text>
        <text class="user-role">å½“å‰èº«ä»½ï¼š{{welcomeText}}ç«¯</text>
        <view wx:if="{{userRole === 'patient'}}" class="medication-status">
          <text>ä»Šæ—¥å·²æœè¯ï¼š{{todayMedicationCount}}/{{totalMedicationCount}}</text>
        </view>
      </view>
    </view>
    <view class="user-actions">
      <button class="btn-switch" bindtap="switchRole">åˆ‡æ¢èº«ä»½</button>
      <button class="btn-logout" bindtap="logout">é€€å‡º</button>
    </view>
  </view>

  <!-- åŠŸèƒ½æ¨¡å—ç½‘æ ¼ - ç§»é™¤å½“å‰é¡µé¢æ ‡è¯† -->
  <view class="grid">
    <view class="grid-item" 
          wx:for="{{modules}}" 
          wx:key="name" 
          bindtap="navigateTo" 
          data-url="{{item.path}}">
      <view class="icon">{{item.icon}}</view>
      <text class="name">{{item.name}}</text>
    </view>
  </view>

  <!-- æ‚£è€…ä¸“å±å†…å®¹ -->
  <view wx:if="{{userRole === 'patient'}}">
    <!-- æ¿€åŠ±å¡ç‰‡ -->
    <view class="motivation-card card">
      <view class="section-title">ä»Šæ—¥æ¿€åŠ±</view>
      <text class="motivation-text">{{dailyMotivation}}</text>
      <view class="streak">
        <text>è¿ç»­æ‰“å¡ï¼š{{streakDays}}å¤©</text>
        <text class="points">ç§¯åˆ†ï¼š{{points}}</text>
      </view>
    </view>

    <!-- å¿«æ·ç»Ÿè®¡ -->
    <view class="stats-grid card">
      <view class="section-title">å¥åº·ç»Ÿè®¡</view>
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-value">{{adherenceRate}}%</text>
          <text class="stat-label">æœè¯ä¾ä»ç‡</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{streakDays}}</text>
          <text class="stat-label">è¿ç»­å¤©æ•°</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{totalDoses}}</text>
          <text class="stat-label">æ€»æœè¯æ¬¡æ•°</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŒ»ç”Ÿä¸“å±å†…å®¹ -->
  <view wx:if="{{userRole === 'doctor'}}">
    <view class="doctor-stats card">
      <view class="section-title">å·¥ä½œæ¦‚è§ˆ</view>
      <view class="stats-row">
        <view class="stat-item">
          <text class="stat-value">12</text>
          <text class="stat-label">ç®¡ç†æ‚£è€…</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">3</text>
          <text class="stat-label">å¾…å¤„ç†</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">85%</text>
          <text class="stat-label">å¹³å‡ä¾ä»ç‡</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å®¶å±ä¸“å±å†…å®¹ -->
  <view wx:if="{{userRole === 'family'}}">
    <view class="family-overview card">
      <view class="section-title">ç…§æŠ¤æ¦‚è§ˆ</view>
      <view class="care-stats">
        <text>ä»Šæ—¥æé†’ï¼š{{todayMedicationCount}}/{{totalMedicationCount}}</text>
        <text>æœ€è¿‘è¯„ä¼°ï¼šè‰¯å¥½</text>
        <text>ä¸‹æ¬¡å¤è¯Šï¼š2025-11-15</text>
      </view>
    </view>
  </view>
</view>

<view class="nav-item" bindtap="goToChat">
  <image src="..." />
  <text>å®¶åº­èŠå¤©</text>
</view>

<view class="nav-item" bindtap="goToConsultation"> 
  <view class="icon-box">ğŸ©º</view>
  <text>åŒ»ç”Ÿæ²Ÿé€š</text>
</view>