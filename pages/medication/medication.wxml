<view class="container">
  <view class="today-medication card">
    <view class="section-title">ä»Šæ—¥æœè¯è®¡åˆ’</view>
    <view class="medication-list">
      <view class="medication-item {{item.taken ? 'taken' : ''}}" wx:for="{{todayMedications}}" wx:key="id">
        <view class="medication-info">
          <text class="med-name">{{item.name}}</text>
          <text class="med-dose">{{item.dose}}</text>
          <text class="med-time">{{item.time}}</text>
        </view>
        <button class="take-btn {{item.taken ? 'taken' : ''}}" 
                bindtap="takeMedication" 
                data-id="{{item.id}}"
                disabled="{{item.taken}}">
          {{item.taken ? 'å·²æœç”¨' : 'æ ‡è®°æœç”¨'}}
        </button>
      </view>
    </view>
  </view>

  <view class="reminder-settings card">
    <view class="section-title">æé†’è®¾ç½®</view>
    <medication-reminder medications="{{medications}}" bind:reminderUpdate="onReminderUpdate" />
  </view>

  <view class="statistics card">
    <view class="section-title">æœè¯ç»Ÿè®¡</view>
    <chart data="{{chartData}}" type="line" />
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{adherenceRate}}%</text>
        <text class="stat-label">ä¾ä»ç‡</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{streakDays}}</text>
        <text class="stat-label">è¿ç»­å¤©æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{totalDoses}}</text>
        <text class="stat-label">æ€»å‰‚é‡</text>
      </view>
    </view>
  </view>

  <view class="stock-warning card" wx:if="{{lowStockMeds.length > 0}}">
    <view class="section-title text-warning">âš ï¸ è¯å“åº“å­˜é¢„è­¦</view>
    <view class="warning-item" wx:for="{{lowStockMeds}}" wx:key="id">
      <text>{{item.name}} å‰©ä½™ {{item.stock}} å¤©ç”¨é‡</text>
    </view>
  </view>

  <view class="appointment-reminder card" wx:if="{{nextAppointment}}">
    <view class="section-title">ğŸ“… å¤è¯Šæé†’</view>
    <text>ä¸‹æ¬¡å¤è¯Šï¼š{{nextAppointment.date}}</text>
    <text>åŒ»ç”Ÿï¼š{{nextAppointment.doctor}}</text>
  </view>
</view>