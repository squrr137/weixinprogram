<view class="container">
  <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
  <view class="stats-overview card">
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">12</text>
        <text class="stat-label">ç®¡ç†æ‚£è€…</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">3</text>
        <text class="stat-label">éœ€å…³æ³¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">85%</text>
        <text class="stat-label">å¹³å‡ä¾ä»ç‡</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">2</text>
        <text class="stat-label">å¾…å›å¤</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="search-filter card">
    <view class="search-box">
      <input placeholder="æœç´¢æ‚£è€…å§“å..." bindinput="onSearchInput" />
      <text class="search-icon">ğŸ”</text>
    </view>
    <view class="filter-tabs">
      <view class="filter-tab {{currentFilter === 'all' ? 'active' : ''}}" 
            bindtap="setFilter" data-filter="all">å…¨éƒ¨</view>
      <view class="filter-tab {{currentFilter === 'attention' ? 'active' : ''}}" 
            bindtap="setFilter" data-filter="attention">éœ€å…³æ³¨</view>
      <view class="filter-tab {{currentFilter === 'recent' ? 'active' : ''}}" 
            bindtap="setFilter" data-filter="recent">æœ€è¿‘è”ç³»</view>
    </view>
  </view>

  <!-- æ‚£è€…åˆ—è¡¨ -->
  <view class="patients-list">
    <view class="patient-item card" wx:for="{{filteredPatients}}" wx:key="id" bindtap="viewPatientDetail" data-id="{{item.id}}">
      <view class="patient-header">
        <view class="patient-avatar">{{item.avatar}}</view>
        <view class="patient-info">
          <text class="patient-name">{{item.name}}</text>
          <text class="patient-diagnosis">{{item.diagnosis}}</text>
          <text class="patient-lastVisit">ä¸Šæ¬¡å¤è¯Šï¼š{{item.lastVisit}}</text>
        </view>
        <view class="patient-status {{item.needAttention ? 'warning' : 'normal'}}">
          {{item.needAttention ? 'éœ€å…³æ³¨' : 'è‰¯å¥½'}}
        </view>
      </view>
      
      <view class="patient-stats">
        <view class="stat">
          <text class="stat-label">æœè¯ä¾ä»ç‡</text>
          <text class="stat-value {{item.adherenceRate < 80 ? 'low' : ''}}">{{item.adherenceRate}}%</text>
        </view>
        <view class="stat">
          <text class="stat-label">æœ€è¿‘è¯„ä¼°</text>
          <text class="stat-value">{{item.lastAssessment}}</text>
        </view>
        <view class="stat">
          <text class="stat-label">æœªè¯»æ¶ˆæ¯</text>
          <text class="stat-value {{item.unreadMessages > 0 ? 'has-message' : ''}}">{{item.unreadMessages}}</text>
        </view>
      </view>

      <view class="patient-actions">
        <button class="btn-secondary" bindtap="sendMessage" data-id="{{item.id}}">å‘æ¶ˆæ¯</button>
        <button class="btn-primary" bindtap="viewRecords" data-id="{{item.id}}">æŸ¥çœ‹è®°å½•</button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{filteredPatients.length === 0}}">
    <text class="empty-icon">ğŸ‘¥</text>
    <text class="empty-text">æš‚æ— æ‚£è€…æ•°æ®</text>
  </view>
</view>